%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Copyright 2015-2021 Finnish Geospatial Research Institute FGI, National
%% Land Survey of Finland. This file is part of FGI-GSRx software-defined
%% receiver. FGI-GSRx is a free software: you can redistribute it and/or
%% modify it under the terms of the GNU General Public License as published
%% by the Free Software Foundation, either version 3 of the License, or any
%% later version. FGI-GSRx software receiver is distributed in the hope
%% that it will be useful, but WITHOUT ANY WARRANTY, without even the
%% implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
%% See the GNU General Public License for more details. You should have
%% received a copy of the GNU General Public License along with FGI-GSRx
%% software-defined receiver. If not, please visit the following website
%% for further information: https://www.gnu.org/licenses/
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
% GPS L5 参数配置文件 - JammerTest2023 数据集
% 基于标准 GPS L5 规范 (IS-GPS-705)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% System parameters
sys,enabledSignals,[{['gpsl5']}], % List of enabled signals - GPS L5 only

sys,msToProcess,300e3,       % Number of ms to process in total from data file. If 0 the maximum number of ms will be processed
sys,msToSkip,0e3,             % Number of ms to skip from beginning of file

% Input/Output file names
sys,loadDataFile,false,     % Defines if data file is to be loaded
sys,dataFileIn,'',

sys,saveDataFile,true,     % Defines if data should be stored to file
sys,dataFileOut,'D:\skill\beidou\jammer\trackData_gpsl5_JT_16.1.1.mat',  % Data file for storing output
sys,loadIONMetaDataReading,false,
sys,metaDataFileIn,''

% Plotting parameters
sys,plotSpectra,false,              % If set to true plot spectrum and histogram results
sys,plotAcquisition,false,          % If set to true plot acquisition results
sys,plotTracking,false,             % If set to true plot tracking results
sys,showTrackingOutput,false,        % If set to true show the tracking output

%Tracking option: parallel vs sequential
sys,parallelChannelTracking,false, %if it is true, it will look for the saved track Data files, it will be enough to offer any single single channel's track data file, the receiver will automatically combine the necessary trackdata files into one combined big file for navigation processing
sys,currentWorkingDirectoryForFGIGSRx,'D:\skill\beidou\FGI-GSRx-2.0.2\',
sys,trackDataFilePath,'D:\skill\beidou\output\parallel\', %This is for parallel tracking
sys,batchFileNameToRunParallelTracking,'runGNSSSingleSatelliteTracking.bat', %FGI-GSRx creates this batch file to be processed later in windows command prompt


% Multi correlator tracking parameters
sys,enableMultiCorrelatorTracking,true, 	% Disable or enable multi correlator tracking
sys,multiCorrelatorTrackingChannel,[1:8],       % Channel to be used for multi correlator tracking
sys,multiCorrelatorTrackingRate,20,        	% Update rate in epochs for multi correlator tracking
sys,mulCorrFingers,[-2:0.25:2],                % Correlator finger positions [chips]
sys,noiseFingerIndex,1,                  	% Index of finger for measuring noise level when multi correlator tracking is enabled
sys,earlyFingerIndex,8,                  	% Index of early finger when multi correlator tracking is enabled
sys,promptFingerIndex,9,                 	% Index of prompt finger when multi correlator tracking is enabled
sys,lateFingerIndex,10,                  	% Index of late finger when multi correlator tracking is enabled


% Navigation parameters
nav,navSolPeriod,1000,            % Output period in ms for navigation solution
nav,elevationMask,5,            % Elevation mask in degrees [0 - 90]. Satellites below this elevation will be excluded from navigation
nav,snrMask,30,            		% SNR mask in dB-Hz [usually in the range between 30-35 dB-Hz]. Satellites below the SNR mask will be excluded from navigation
nav,gpsLeapSecond,18,           % GPS-UTC leap seconds (更新为2023年的值)
nav,trueposition,0,
% True/reference user position, if available
nav,trueLat, 69.2957388889,
nav,trueLong,, 16.0303444444,
nav,trueHeight,45,


% =====================================================================
% GPS L5 Settings
% =====================================================================
% GPS L5 技术规格 (IS-GPS-705):
%   - 载波频率: 1176.45 MHz
%   - 调制方式: BPSK(10) (数据通道L5I + 导频通道L5Q)
%   - 码速率: 10.23 Mcps (10倍于L1 C/A码的1.023 Mcps)
%   - 码长度: 10230 chips (重复周期1ms)
%   - 带宽: ~24 MHz (主瓣 ±10 MHz)
%   - PRN码: 使用13位LFSR生成，PRN 1-32
% =====================================================================

% Input RF file - 确保你的数据文件是L5频段 (1176.45 MHz)
% 注意：如果你的数据文件是L1频段(1575.42 MHz)，需要使用L1的参数文件！
gpsl5,rfFileName,'D:\skill\beidou\jammer\2eee8cfd-db00-4e46-bd62-d7632c09c700_g5mbon10\JammerTest2023\JT23_16.1.1\JT23_16.1.1_L5.iq',            % Name of RF data file used for GPS L5 signal

% Radio front end configurations
% 重要：这些参数必须与你的实际RF数据文件匹配！
gpsl5,centerFrequency,1176.45e6, % Radio center frequency [Hz] - GPS L5标准载波频率
gpsl5,samplingFreq,30.69e6, % Sampling frequency [Hz] - 根据你的前端设备调整
gpsl5,bandWidth,20e6, % Bandwidth of the front end [Hz] - L5信号带宽约20-24 MHz
gpsl5,sampleSize,16, % Number of bits for one sample. For complex data this is the size for I+Q.
gpsl5,complexData,true, % Complex or real data - L5通常使用复数IQ采样
gpsl5,iqSwap,false, % IQ swap setting

% Acquisition parameters
gpsl5,acqSatelliteList,[1:32],       % Specify what GPS satellites to search for [PRN numbers]
gpsl5,nonCohIntNumber,10,           % Number of non-coherent integration rounds for signal acquisition - L5信号较弱，增加非相干积分
gpsl5,cohIntNumber,10,              % Coherent integration time for signal acquisition [ms] - L5可以使用更长的相干积分时间
gpsl5,acqThreshold,9,             % Threshold for the signal presence decision rule
gpsl5,maxSearchFreq,6000,          % Maximum search frequency in one direction

% Tracking parameters
% L5信号质量较好，可以使用相对较窄的环路带宽
gpsl5,fllNoiseBandwidthWide,80, 	% FLL noise BW wide[Hz]
gpsl5,fllNoiseBandwidthNarrow,40,   % FLL noise BW narrow [Hz]
gpsl5,fllNoiseBandwidthVeryNarrow,5,   % FLL noise BW very narrow [Hz]
gpsl5,fllDampingRatio,1.5,         % FLL damping ratio
gpsl5,fllLoopGain,0.7,             % FLL loop gain
gpsl5,pllNoiseBandwidthWide,15,        % PLL noise BW [Hz]
gpsl5,pllNoiseBandwidthNarrow,10,        % PLL noise BW [Hz]
gpsl5,pllNoiseBandwidthVeryNarrow,5,        % PLL noise BW [Hz]
gpsl5,pllDampingRatio,0.7,          % PLL damping ratio
gpsl5,pllLoopGain,0.2,              % PLL loop gain
gpsl5,dllDampingRatio,0.7,          % DLL damping ratio
gpsl5,dllNoiseBandwidth,1,          % DLL noise BW [Hz]
gpsl5,corrFingers,[-2 -0.25 0 0.25],    % Correlator finger positions [chips] - L5码片周期更短(约0.098μs)
gpsl5,Nc,0.001,                     % integration time in seconds
gpsl5,earlyFingerIndex,2,               % Index of early finger
gpsl5,promptFingerIndex,3,              % Index of prompt finger
gpsl5,lateFingerIndex,4,                % Index of late finger
gpsl5,noiseFingerIndex,1,               % Index of fingers for measuring noise level
gpsl5,pllWideBandLockIndicatorThreshold,0.5,               % PLL lock indicator threshold for DLL unlocked => locked
gpsl5,pllNarrowBandLockIndicatorThreshold,0.8,               % PLL lock indicator threshold for DLL unlocked => locked
gpsl5,runningAvgWindowForLockDetectorInMs, 20
gpsl5,fllWideBandLockIndicatorThreshold,0.5,               % FLL wide band lock indicator threshold for DLL unlocked => locked
gpsl5,fllNarrowBandLockIndicatorThreshold,0.7,               % FLL narrow band lock detector threshold for DLL unlocked => locked


% Signal specific observation parameters
gpsl5,enableIonoCorrections,true,       % Use iono corrections or not
gpsl5,enableTropoCorrections,true,      % Use tropo corrections or not
gpsl5,ionomodel,'default',              % Iono model to use (default,gpsl1,gale1b,beib1,glol1, ionex)
gpsl5,ionexFile,''                      % Filename for ionex file if ionomodel is = ionex
